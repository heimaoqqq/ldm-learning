# VAE-LDM æœ¬åœ°ä¿®å¤é…ç½®
# ğŸ¯ ä½¿ç”¨æ­£ç¡®çš„æœ¬åœ°æ•°æ®é›†è·¯å¾„

# ================== ğŸ“ è·¯å¾„é…ç½® ==================
paths:
  vae_checkpoint: '/kaggle/input/vae-best-fid/adv_vqvae_best_fid.pth'  # VAEæƒé‡è·¯å¾„
  data_dir: '/kaggle/input/dataset'                                   # ğŸ”§ æ­£ç¡®çš„æ•°æ®é›†è·¯å¾„ï¼
  save_dir: './checkpoints'                                    # æœ¬åœ°ä¿å­˜è·¯å¾„

# ================== ğŸ›ï¸ æ¨¡å‹é…ç½® ==================
model:
  num_classes: 31
  image_size: 32              
  diffusion_steps: 1000       
  noise_schedule: "cosine"    

# ================== ğŸƒ è®­ç»ƒé…ç½® - FIDä¼˜åŒ– ==================
training:   
  # æœ¬åœ°ä¼˜åŒ–å‚æ•°
  batch_size: 4                    # æœ¬åœ°GPUé€‚ä¸­batch size
  gradient_accumulation_steps: 6   # æœ‰æ•ˆbatch = 4Ã—6 = 24
  learning_rate: 0.0001           
  weight_decay: 0.01               
  max_epochs: 100                  # æœ¬åœ°æµ‹è¯•ç”¨è¾ƒå°‘è½®æ•°
  
  # é¢‘ç¹è¯„ä¼°ä»¥ç›‘æ§FIDå˜åŒ–
  log_interval: 5                  
  save_interval_epochs: 10         
  eval_interval: 10                # æ¯10è½®è¯„ä¼°FID
  
  # æœ¬åœ°ä¼˜åŒ–
  enable_wandb: false
  num_workers: 0                   # é¿å…å¤šè¿›ç¨‹é—®é¢˜

# ================== ğŸ“Š FIDä¼˜åŒ–å…³é”®é…ç½® ==================
evaluation:
  # ğŸ”§ å…³é”®ä¿®å¤ï¼šé€‚ä¸­çš„æ ·æœ¬æ•°é‡
  eval_classes: 5                  # è¯„ä¼°5ä¸ªç±»åˆ«
  samples_per_class: 50            # æ¯ç±»50ä¸ªæ ·æœ¬
  ddim_steps: 75                   # 75æ­¥é‡‡æ ·ï¼ˆå¹³è¡¡è´¨é‡å’Œé€Ÿåº¦ï¼‰
  eta: 0.0                         # ç¡®å®šæ€§é‡‡æ ·
  max_real_samples: 500            # 500ä¸ªçœŸå®æ ·æœ¬ç”¨äºåŸºçº¿
  
  # æ‰¹é‡ä¼˜åŒ–
  generation_batch_size: 8         
  
# ================== ğŸ® GPUä¼˜åŒ–é…ç½® ==================
gpu:
  device: 'cuda'
  mixed_precision: false
  gradient_clip: 1.0

# ================== ğŸ¨ å…³é”®é‡‡æ ·é…ç½®ä¿®å¤ ==================
sampling:
  guidance_scale: 2.5              # ğŸ”§ å¯ç”¨é€‚åº¦CFGå¼•å¯¼
  use_ddim: true
  num_inference_steps: 75          # ğŸ”§ å¢åŠ æ¨ç†æ­¥æ•°
  
  # é«˜è´¨é‡é‡‡æ ·è®¾ç½®
  clip_denoised: true
  progress: true

# ================== ğŸ“ å®éªŒè®°å½• ==================
experiment:
  name: "VAE-LDM-Local-Fixed"
  description: "æœ¬åœ°FIDä¿®å¤ç‰ˆï¼šä½¿ç”¨æ­£ç¡®æ•°æ®é›†è·¯å¾„"
  version: "v4.0"
  target_fid: 80.0                 # æœ¬åœ°æµ‹è¯•ç›®æ ‡FID

# ================== ğŸ”§ è°ƒè¯•é…ç½® ==================
debug:
  verbose: true
  save_samples: true
  save_interval_samples: 5         # æ¯5è½®ä¿å­˜æ ·æœ¬
  profile: false 
